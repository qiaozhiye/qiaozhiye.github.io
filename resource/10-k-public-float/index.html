<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y5P8DJLTGN"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-Y5P8DJLTGN');
</script>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1"><title>Extract Filer Status and Public Float from 10-K - Qiaozhi Ye</title>
<meta property="og:title" content="Extract Filer Status and Public Float from 10-K - Qiaozhi Ye">
<meta property="og:type" content="article">


<meta property="og:image" content="img/main.jpg">

<meta property="og:url" content="https://yegeorge.com/resource/10-k-public-float/"><meta property="og:description" content="Qiaozhi Ye&#39;s Homepage.">
<meta name="Description" property="description" content="Qiaozhi Ye&#39;s Homepage.">


<meta property="keywords" content ="filer status, public float, data scraping">



<link rel="stylesheet" href="https://yegeorge.com/css/style.min.css">

<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/svg+xml" href="/img/favicon.svg">


<link rel="manifest" href="/site.webmanifest">
<link href="https://yegeorge.comindex.xml" type="application/atom+xml" rel="alternate" title="Sitewide Atom feed" />
<meta name="theme-color" content="#ffffff">


<script>function updateMode(){localStorage.theme==="dark"||!("theme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}function toggleMode(){localStorage.theme==="dark"?localStorage.theme="light":localStorage.theme="dark",updateMode()}window.onload=updateMode();function toggleMenu(){let e=document.getElementById("navbar-default");e.classList.contains("hidden")?e.classList.remove("hidden"):e.classList.add("hidden")}</script>

  </head>
  <body>
    <header class="md:px-0 px-2">
        <nav >
  <div class="container flex flex-wrap justify-between items-center mx-auto">
    <div class="nav-main my-2.5">
      <a href="https://yegeorge.com" class="nav-title py-2.5 text-2xl
               text-zinc-600 dark:text-zinc-300 hover:border-b-0">Qiaozhi Ye</a>
    </div>
    <button type="button"
            onclick="toggleMenu()"
            class="inline-flex items-center p-2 ml-3
                  text-sm text-gray-500
                  rounded-lg md:hidden hover:bg-gray-100
                  focus:outline-none focus:ring-2
                  focus:ring-gray-200 dark:text-gray-400
                  dark:hover:bg-gray-700 dark:focus:ring-gray-600"
            aria-controls="navbar-default"
            aria-expanded="false">
        <span class="sr-only">Open main menu</span>
        <svg class="w-6 h-6" aria-hidden="true" fill="currentColor"
             viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
          <path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1
                           0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0
                           01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0
                           01-1-1z" clip-rule="evenodd"></path>
        </svg>
    </button>
    <div class="hidden w-full md:block md:w-auto" id="navbar-default">
      <ul class="grid md:grid-flow-col items-center justify-between text-lg
                 my-2.5 grid-cols-1 pl-0 text-center">
        
        <li class="p-2.5 md:first:pl-0 md:border-none border-b dark:border-zinc-500 list-none">
          <a class="text-zinc-600 dark:text-zinc-300
                    hover:border-b-0" href="/research/">Research</a>
        </li>
        
        <li class="p-2.5 md:first:pl-0 md:border-none border-b dark:border-zinc-500 list-none">
          <a class="text-zinc-600 dark:text-zinc-300
                    hover:border-b-0" href="/resource/">Resources</a>
        </li>
        
        <li class="h-7 pl-2.5 pr-0 list-none">
          <button type="button" onclick="toggleMode()" class="h-full"  aria-label="Toggle between dark and light mode">
            <img class="h-7 w-7 max-h-full mb-1.5 p-1.5 hidden dark:inline"
                 id="ligh-mode-button-img"
                 alt="A sun icon for switching to light mode"
                 src="https://yegeorge.com/img/light_mode.svg">
            <img class="h-7 w-7 max-h-full mb-1.5 p-1.5 inline dark:hidden"
                 id="dark-mode-button-img"
                 alt="A moon icon for switching to dark mode"
                 src="https://yegeorge.com/img/dark_mode.svg">
          </button>
        </li>
      </ul>
    </div>
  </div>
</nav>


    </header>
    <main class="content h-card container mt-2 m-auto
                 leading-loose md:px-0 px-2 z-0"
          role="main">
    
<article class="article h-entry" itemprop="mainEntity" itemscope itemtype="http://schema.org/BlogPosting">
    <div class="title-container">
        <h1 class="article-title p-name" itemprop="name">Extract Filer Status and Public Float from 10-K</h1>
        <div class="flex justify-between items-center">
        
               
    <div class="text-right">
        
        
            <a class="p-author h-card" rel="author" href="https://www.yegeorge.com" itemprop="url" itemscope itemtype="http://schema.org/Person">
                <span itemprop="name">Qiaozhi Ye</span>
            </a>
            
        
    </div>

            </div>
        
        
        <a><i itemprop="headline" class="text-gray-600 dark:text-gray-400 text-right border-none p-author h-card">
            Here is my R code to extract filer status and public float of U.S. listed companies from their 10-K filings obtained from EDGAR. Note that you may need to manually verify the output and fill up the missing ones after running this code.
        </i></a>
        
        </div>
        
    </div>

    <div class="article-content e-content" itemprop="articleBody">
        <div class="highlight"><pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic">##### Load Package #####</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#447fcf">library</span>(edgar)
</span></span><span style="display:flex;"><span><span style="color:#447fcf">library</span>(stringr)
</span></span><span style="display:flex;"><span><span style="color:#447fcf">library</span>(lubridate)
</span></span><span style="display:flex;"><span><span style="color:#447fcf">library</span>(edgarWebR)
</span></span><span style="display:flex;"><span><span style="color:#447fcf">library</span>(dplyr)
</span></span><span style="display:flex;"><span><span style="color:#447fcf">library</span>(tidyr)
</span></span><span style="display:flex;"><span><span style="color:#447fcf">library</span>(textshape)
</span></span><span style="display:flex;"><span><span style="color:#447fcf">library</span>(readr)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic">##### Download 10-K from EDGAR #####</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic">## set directory</span>
</span></span><span style="display:flex;"><span><span style="color:#447fcf">setwd</span>(<span style="color:#ed9d13">&#34;/Users/yeqiaozhi/Dropbox/project/data/&#34;</span>)    <span style="color:#999;font-style:italic">#enter your own directory here</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>get_10_k &lt;- <span style="color:#447fcf">getFilingsHTML</span>(cik.no = <span style="color:#ed9d13">&#34;ALL&#34;</span>,    <span style="color:#999;font-style:italic">#enter companys&#39; cik or use &#34;ALL&#34;</span>
</span></span><span style="display:flex;"><span>                           form.type = <span style="color:#ed9d13">&#34;10-K&#34;</span>, 
</span></span><span style="display:flex;"><span>                           filing.year = <span style="color:#3677a9">2022</span>,    <span style="color:#999;font-style:italic">#enter filing year, e.g., 2022</span>
</span></span><span style="display:flex;"><span>                           quarter = <span style="color:#447fcf">c</span>(<span style="color:#3677a9">1</span>, <span style="color:#3677a9">2</span>, <span style="color:#3677a9">3</span>, <span style="color:#3677a9">4</span>), 
</span></span><span style="display:flex;"><span>                           useragent = <span style="color:#ed9d13">&#34;xxx@xxx.com&#34;</span>    <span style="color:#999;font-style:italic">#enter your email address</span>
</span></span><span style="display:flex;"><span>                           )
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic">##### Extract filter status and public float #####</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic">## create an empty dataset to save results</span>
</span></span><span style="display:flex;"><span>parse_df &lt;- <span style="color:#447fcf">data.frame</span>()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic">## extract all cik inside the folder that stores the 10-K HTML files.</span>
</span></span><span style="display:flex;"><span>cik_list &lt;- <span style="color:#447fcf">list.files</span>(<span style="color:#ed9d13">&#34;/Users/yeqiaozhi/Dropbox/project/data/Edgar filings_HTML view/Form 10-K/&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic">## extract filer status and public float using iteration</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#447fcf">for </span>(i in <span style="color:#3677a9">1</span>:<span style="color:#447fcf">length</span>(cik_list)){
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#999;font-style:italic">## get all 10-K file name under a cik folder</span>
</span></span><span style="display:flex;"><span>  file_name &lt;- <span style="color:#447fcf">list.files</span>(<span style="color:#447fcf">paste0</span>(<span style="color:#ed9d13">&#34;/Users/yeqiaozhi/Dropbox/project/data/Edgar filings_HTML view/Form 10-K/&#34;</span>,cik_list[i],<span style="color:#ed9d13">&#34;/&#34;</span>))
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#447fcf">for </span>(w in <span style="color:#3677a9">1</span>:<span style="color:#447fcf">length</span>(file_name)){
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#999;font-style:italic">## get the full 10-K file path</span>
</span></span><span style="display:flex;"><span>    file &lt;- <span style="color:#447fcf">paste0</span>(<span style="color:#ed9d13">&#34;/Users/yeqiaozhi/Dropbox/project/data/Edgar filings_HTML view/Form 10-K/&#34;</span>,cik_list[i],<span style="color:#ed9d13">&#34;/&#34;</span>,file_name[w])    <span style="color:#999;font-style:italic">#replace &#34;/Users/yeqiaozhi/Dropbox/project/data/&#34; with your own location.</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#999;font-style:italic">## get filing date</span>
</span></span><span style="display:flex;"><span>    file_date &lt;- <span style="color:#447fcf">as.Date</span>(<span style="color:#447fcf">str_remove_all</span>(<span style="color:#447fcf">str_extract</span>(file,<span style="color:#ed9d13">&#34;10-K_.{10}&#34;</span>),<span style="color:#ed9d13">&#34;10-K_&#34;</span>),<span style="color:#ed9d13">&#34;%Y-%m-%d&#34;</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#999;font-style:italic">## read and get the first 10,000 characters from the 10-K file. Filer status and public float are usually shown in the front page so the first 10,000 characters should be able to capture the information.</span>
</span></span><span style="display:flex;"><span>    script &lt;- <span style="color:#447fcf">tolower</span>(<span style="color:#447fcf">substr</span>(<span style="color:#447fcf">parse_filing</span>(file, strip = <span style="color:#6ab825;font-weight:bold">TRUE</span>, include.raw = <span style="color:#6ab825;font-weight:bold">FALSE</span>, fix.errors = <span style="color:#6ab825;font-weight:bold">TRUE</span>)[1],<span style="color:#3677a9">1</span>,<span style="color:#3677a9">10000</span>))
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#999;font-style:italic">## remove all whitespace</span>
</span></span><span style="display:flex;"><span>    script_nospace &lt;- <span style="color:#447fcf">gsub</span>(x = <span style="color:#447fcf">gsub</span>(<span style="color:#ed9d13">&#34;\\s+&#34;</span>, <span style="color:#ed9d13">&#34;&#34;</span>, script), pattern = <span style="color:#447fcf">intToUtf8</span>(<span style="color:#3677a9">160</span>),replacement =   <span style="color:#ed9d13">&#34;&#34;</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#999;font-style:italic">## extract prior 35 characters before the symbols indicating &#34;yes&#34;. Filer status usually presents before one of them.</span>
</span></span><span style="display:flex;"><span>    symbol_1 &lt;- <span style="color:#447fcf">data.frame</span>(<span style="color:#447fcf">str_extract_all</span>(script_nospace,<span style="color:#ed9d13">&#34;.{30}☒&#34;</span>)) %&gt;% <span style="color:#447fcf">rename</span>(words=<span style="color:#3677a9">1</span>)
</span></span><span style="display:flex;"><span>    symbol_2 &lt;- <span style="color:#447fcf">data.frame</span>(<span style="color:#447fcf">str_extract_all</span>(script_nospace,<span style="color:#ed9d13">&#34;.{30}[X]&#34;</span>)) %&gt;% <span style="color:#447fcf">rename</span>(words=<span style="color:#3677a9">1</span>)
</span></span><span style="display:flex;"><span>    symbol_3 &lt;- <span style="color:#447fcf">data.frame</span>(<span style="color:#447fcf">str_extract_all</span>(script_nospace,<span style="color:#ed9d13">&#34;.{30}[x]&#34;</span>)) %&gt;% <span style="color:#447fcf">rename</span>(words=<span style="color:#3677a9">1</span>)
</span></span><span style="display:flex;"><span>    symbol_4 &lt;- <span style="color:#447fcf">data.frame</span>(<span style="color:#447fcf">str_extract_all</span>(script_nospace,<span style="color:#ed9d13">&#34;.{30}☑&#34;</span>)) %&gt;% <span style="color:#447fcf">rename</span>(words=<span style="color:#3677a9">1</span>)
</span></span><span style="display:flex;"><span>    symbol_5 &lt;- <span style="color:#447fcf">data.frame</span>(<span style="color:#447fcf">str_extract_all</span>(script_nospace,<span style="color:#ed9d13">&#34;.{30}⌧&#34;</span>)) %&gt;% <span style="color:#447fcf">rename</span>(words=<span style="color:#3677a9">1</span>)    
</span></span><span style="display:flex;"><span>    symbol_6 &lt;- <span style="color:#447fcf">data.frame</span>(<span style="color:#447fcf">str_extract_all</span>(script_nospace,<span style="color:#ed9d13">&#34;.{30}þ&#34;</span>)) %&gt;% <span style="color:#447fcf">rename</span>(words=<span style="color:#3677a9">1</span>)
</span></span><span style="display:flex;"><span>    symbol_7 &lt;- <span style="color:#447fcf">data.frame</span>(<span style="color:#447fcf">str_extract_all</span>(script_nospace,<span style="color:#ed9d13">&#34;.{30}ý&#34;</span>)) %&gt;% <span style="color:#447fcf">rename</span>(words=<span style="color:#3677a9">1</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#999;font-style:italic">## combine all extracted words and find the filer status</span>
</span></span><span style="display:flex;"><span>    filer_status &lt;- <span style="color:#447fcf">bind_rows</span>(symbol_1,symbol_2,symbol_3,symbol_4,symbol_5,symbol_6,symbol_7) %&gt;% 
</span></span><span style="display:flex;"><span>      <span style="color:#447fcf">mutate</span>(words=<span style="color:#447fcf">str_remove_all</span>(words,<span style="color:#ed9d13">&#34; &#34;</span>),
</span></span><span style="display:flex;"><span>             status=<span style="color:#447fcf">case_when</span>(<span style="color:#447fcf">str_detect</span>(words,<span style="color:#ed9d13">&#34;reporting&#34;</span>) &amp; <span style="color:#447fcf">str_detect</span>(words,<span style="color:#ed9d13">&#34;company&#34;</span>) ~<span style="color:#ed9d13">&#34;src&#34;</span>,
</span></span><span style="display:flex;"><span>                              <span style="color:#447fcf">str_detect</span>(words,<span style="color:#ed9d13">&#34;large&#34;</span>) &amp; <span style="color:#447fcf">str_detect</span>(words,<span style="color:#ed9d13">&#34;accelerated&#34;</span>)~<span style="color:#ed9d13">&#34;laf&#34;</span>,
</span></span><span style="display:flex;"><span>                              <span style="color:#447fcf">str_detect</span>(words,<span style="color:#ed9d13">&#34;accelerated&#34;</span>) &amp; !<span style="color:#447fcf">str_detect</span>(words,<span style="color:#ed9d13">&#34;large&#34;</span>) &amp; !<span style="color:#447fcf">str_detect</span>(words,<span style="color:#ed9d13">&#34;non-&#34;</span>)~<span style="color:#ed9d13">&#34;af&#34;</span>,
</span></span><span style="display:flex;"><span>                              <span style="color:#447fcf">str_detect</span>(words,<span style="color:#ed9d13">&#34;non-accelerated&#34;</span>) ~<span style="color:#ed9d13">&#34;naf&#34;</span>,
</span></span><span style="display:flex;"><span>                              <span style="color:#447fcf">str_detect</span>(words,<span style="color:#ed9d13">&#34;growth&#34;</span>) &amp; <span style="color:#447fcf">str_detect</span>(words,<span style="color:#ed9d13">&#34;company&#34;</span>)~<span style="color:#ed9d13">&#34;egc&#34;</span>)) %&gt;% 
</span></span><span style="display:flex;"><span>      <span style="color:#447fcf">filter</span>(!<span style="color:#447fcf">is.na</span>(status)) %&gt;% 
</span></span><span style="display:flex;"><span>      <span style="color:#447fcf">summarise</span>(status=<span style="color:#447fcf">paste</span>(status,collapse = <span style="color:#ed9d13">&#34;,&#34;</span>)) %&gt;% 
</span></span><span style="display:flex;"><span>      <span style="color:#447fcf">mutate</span>(src=<span style="color:#447fcf">ifelse</span>(<span style="color:#447fcf">str_detect</span>(status,<span style="color:#ed9d13">&#34;src&#34;</span>),<span style="color:#6ab825;font-weight:bold">TRUE</span>,<span style="color:#6ab825;font-weight:bold">FALSE</span>),
</span></span><span style="display:flex;"><span>             naf=<span style="color:#447fcf">ifelse</span>(<span style="color:#447fcf">str_detect</span>(status,<span style="color:#ed9d13">&#34;naf&#34;</span>),<span style="color:#6ab825;font-weight:bold">TRUE</span>,<span style="color:#6ab825;font-weight:bold">FALSE</span>),
</span></span><span style="display:flex;"><span>             af=<span style="color:#447fcf">ifelse</span>(<span style="color:#447fcf">str_detect</span>(status,<span style="color:#ed9d13">&#34;af&#34;</span>) &amp; !<span style="color:#447fcf">str_detect</span>(status,<span style="color:#ed9d13">&#34;laf&#34;</span>) &amp; !<span style="color:#447fcf">str_detect</span>(status,<span style="color:#ed9d13">&#34;naf&#34;</span>),<span style="color:#6ab825;font-weight:bold">TRUE</span>,<span style="color:#6ab825;font-weight:bold">FALSE</span>),
</span></span><span style="display:flex;"><span>             laf=<span style="color:#447fcf">ifelse</span>(<span style="color:#447fcf">str_detect</span>(status,<span style="color:#ed9d13">&#34;laf&#34;</span>),<span style="color:#6ab825;font-weight:bold">TRUE</span>,<span style="color:#6ab825;font-weight:bold">FALSE</span>),
</span></span><span style="display:flex;"><span>             egc=<span style="color:#447fcf">ifelse</span>(<span style="color:#447fcf">str_detect</span>(status,<span style="color:#ed9d13">&#34;egc&#34;</span>),<span style="color:#6ab825;font-weight:bold">TRUE</span>,<span style="color:#6ab825;font-weight:bold">FALSE</span>),
</span></span><span style="display:flex;"><span>             status=<span style="color:#447fcf">ifelse</span>(status==<span style="color:#ed9d13">&#34;&#34;</span>,<span style="color:#6ab825;font-weight:bold">NA</span>,status))
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#999;font-style:italic">## split the script into sentences</span>
</span></span><span style="display:flex;"><span>    sentence &lt;- <span style="color:#447fcf">data.frame</span>(<span style="color:#447fcf">split_sentence</span>(script)) %&gt;% <span style="color:#447fcf">rename</span>(sentence=<span style="color:#3677a9">1</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>     <span style="color:#999;font-style:italic">## extract the sentence containing public float</span>
</span></span><span style="display:flex;"><span>    public_float &lt;- sentence %&gt;% 
</span></span><span style="display:flex;"><span>      <span style="color:#447fcf">filter</span>(<span style="color:#447fcf">str_detect</span>(sentence,<span style="color:#ed9d13">&#34;affiliates&#34;</span>),
</span></span><span style="display:flex;"><span>             <span style="color:#447fcf">str_detect</span>(sentence,<span style="color:#ed9d13">&#34;(?i)value&#34;</span>),
</span></span><span style="display:flex;"><span>             <span style="color:#447fcf">str_detect</span>(sentence,<span style="color:#ed9d13">&#34;(?i)\\$&#34;</span>)) 
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#999;font-style:italic">#if public float is non-empty</span>
</span></span><span style="display:flex;"><span>    <span style="color:#447fcf">if </span>(<span style="color:#447fcf">nrow</span>(public_float)&gt;<span style="color:#3677a9">0</span>){
</span></span><span style="display:flex;"><span>    public_float &lt;- public_float %&gt;% 
</span></span><span style="display:flex;"><span>      <span style="color:#447fcf">group_by</span>(<span style="color:#447fcf">row_number</span>()) %&gt;% <span style="color:#999;font-style:italic">#iterate in each sentence</span>
</span></span><span style="display:flex;"><span>      <span style="color:#447fcf">mutate</span>(<span style="color:#999;font-style:italic"># remove share price from the sentences</span>
</span></span><span style="display:flex;"><span>             sentence=<span style="color:#447fcf">ifelse</span>(!<span style="color:#447fcf">is.na</span>(<span style="color:#447fcf">str_extract</span>(sentence,<span style="color:#ed9d13">&#34;\\$[^\\$]+par value|\\$[^\\$]+per share&#34;</span>)) &amp; 
</span></span><span style="display:flex;"><span>                                      <span style="color:#447fcf">nchar</span>(<span style="color:#447fcf">str_extract</span>(sentence,<span style="color:#ed9d13">&#34;\\$[^\\$]+par value|\\$[^\\$]+per share&#34;</span>))&lt;<span style="color:#3677a9">20</span>,
</span></span><span style="display:flex;"><span>                             <span style="color:#447fcf">str_remove_all</span>(sentence,<span style="color:#ed9d13">&#34;\\$[^\\$]+par value|\\$[^\\$]+per share&#34;</span>),sentence),
</span></span><span style="display:flex;"><span>             <span style="color:#999;font-style:italic">#  extract the float and convert it to dollar value</span>
</span></span><span style="display:flex;"><span>             publicfloat=<span style="color:#447fcf">case_when</span>(!<span style="color:#447fcf">is.na</span>(<span style="color:#447fcf">str_extract</span>(sentence,<span style="color:#ed9d13">&#34;\\$[^\\$]+thousand&#34;</span>)) &amp; <span style="color:#447fcf">str_detect</span>(<span style="color:#447fcf">str_extract</span>(sentence,<span style="color:#ed9d13">&#34;\\$[^\\$]+thousand&#34;</span>),<span style="color:#ed9d13">&#34;\\d.&#34;</span>) ~ 
</span></span><span style="display:flex;"><span>                                     <span style="color:#447fcf">parse_number</span>(<span style="color:#447fcf">str_extract</span>(sentence,<span style="color:#ed9d13">&#34;\\$[^\\$]+thousand&#34;</span>))*<span style="color:#3677a9">1000</span>,
</span></span><span style="display:flex;"><span>                                   !<span style="color:#447fcf">is.na</span>(<span style="color:#447fcf">str_extract</span>(sentence,<span style="color:#ed9d13">&#34;\\$[^\\$]+million&#34;</span>)) &amp; <span style="color:#447fcf">str_detect</span>(<span style="color:#447fcf">str_extract</span>(sentence,<span style="color:#ed9d13">&#34;\\$[^\\$]+million&#34;</span>),<span style="color:#ed9d13">&#34;\\d.&#34;</span>) ~ 
</span></span><span style="display:flex;"><span>                                     <span style="color:#447fcf">parse_number</span>(<span style="color:#447fcf">str_extract</span>(sentence,<span style="color:#ed9d13">&#34;\\$[^\\$]+million&#34;</span>),<span style="color:#ed9d13">&#34;|&#34;</span>)*<span style="color:#3677a9">1000000</span>,
</span></span><span style="display:flex;"><span>                                   !<span style="color:#447fcf">is.na</span>(<span style="color:#447fcf">str_extract</span>(sentence,<span style="color:#ed9d13">&#34;\\$[^\\$]+billion&#34;</span>)) &amp; <span style="color:#447fcf">str_detect</span>(<span style="color:#447fcf">str_extract</span>(sentence,<span style="color:#ed9d13">&#34;\\$[^\\$]+billion&#34;</span>),<span style="color:#ed9d13">&#34;\\d.&#34;</span>) ~ 
</span></span><span style="display:flex;"><span>                                     <span style="color:#447fcf">parse_number</span>(<span style="color:#447fcf">str_extract</span>(sentence,<span style="color:#ed9d13">&#34;\\$[^\\$]+billion&#34;</span>))*<span style="color:#3677a9">1000000000</span>,
</span></span><span style="display:flex;"><span>                                   !<span style="color:#447fcf">is.na</span>(<span style="color:#447fcf">str_extract</span>(sentence,<span style="color:#ed9d13">&#34;\\$[^\\$]+trillion&#34;</span>)) &amp; <span style="color:#447fcf">str_detect</span>(<span style="color:#447fcf">str_extract</span>(sentence,<span style="color:#ed9d13">&#34;\\$[^\\$]+trillion&#34;</span>),<span style="color:#ed9d13">&#34;\\d.&#34;</span>) ~ 
</span></span><span style="display:flex;"><span>                                     <span style="color:#447fcf">parse_number</span>(<span style="color:#447fcf">str_extract</span>(sentence,<span style="color:#ed9d13">&#34;\\$[^\\$]+trillion&#34;</span>))*<span style="color:#3677a9">1000000000000</span>,
</span></span><span style="display:flex;"><span>                                   !<span style="color:#447fcf">is.na</span>(<span style="color:#447fcf">str_extract_all</span>(<span style="color:#447fcf">str_remove_all</span>(sentence,<span style="color:#ed9d13">&#34; &#34;</span>),<span style="color:#ed9d13">&#34;\\$([0-9,.]+)&#34;</span>)) &amp; 
</span></span><span style="display:flex;"><span>                                     !<span style="color:#447fcf">is.na</span>(<span style="color:#447fcf">match</span>(<span style="color:#3677a9">0</span>,<span style="color:#447fcf">lapply</span>(<span style="color:#447fcf">str_extract_all</span>(<span style="color:#447fcf">str_remove_all</span>(sentence,<span style="color:#ed9d13">&#34; &#34;</span>),<span style="color:#ed9d13">&#34;\\$([0-9,.]+)&#34;</span>),parse_number)[[1]])) ~ 
</span></span><span style="display:flex;"><span>                                     <span style="color:#3677a9">0</span>,
</span></span><span style="display:flex;"><span>                                   !<span style="color:#447fcf">is.na</span>(<span style="color:#447fcf">str_extract_all</span>(<span style="color:#447fcf">str_remove_all</span>(sentence,<span style="color:#ed9d13">&#34; &#34;</span>),<span style="color:#ed9d13">&#34;\\$([0-9,.]+)&#34;</span>)) &amp; 
</span></span><span style="display:flex;"><span>                                     <span style="color:#447fcf">is.na</span>(<span style="color:#447fcf">match</span>(<span style="color:#3677a9">0</span>,<span style="color:#447fcf">lapply</span>(<span style="color:#447fcf">str_extract_all</span>(<span style="color:#447fcf">str_remove_all</span>(sentence,<span style="color:#ed9d13">&#34; &#34;</span>),<span style="color:#ed9d13">&#34;\\$([0-9,.]+)&#34;</span>),parse_number)[[1]])) ~ 
</span></span><span style="display:flex;"><span>                                     <span style="color:#447fcf">max</span>(<span style="color:#447fcf">lapply</span>(<span style="color:#447fcf">str_extract_all</span>(<span style="color:#447fcf">str_remove_all</span>(sentence,<span style="color:#ed9d13">&#34; &#34;</span>),<span style="color:#ed9d13">&#34;\\$([0-9,.]+)&#34;</span>),parse_number)[[1]])),
</span></span><span style="display:flex;"><span>             publicfloat=<span style="color:#447fcf">ifelse</span>(<span style="color:#447fcf">is.infinite</span>(publicfloat),<span style="color:#6ab825;font-weight:bold">NA</span>,publicfloat)) %&gt;% 
</span></span><span style="display:flex;"><span>      <span style="color:#447fcf">ungroup</span>() %&gt;% <span style="color:#447fcf">select</span>(-<span style="color:#447fcf">`row_number</span>()`) %&gt;% 
</span></span><span style="display:flex;"><span>      <span style="color:#447fcf">filter</span>(<span style="color:#447fcf">sum</span>(!<span style="color:#447fcf">is.na</span>(publicfloat))==<span style="color:#3677a9">0</span> | !<span style="color:#447fcf">is.na</span>(publicfloat)) 
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#999;font-style:italic">## save data into parse_df and add cik, file path, and file date</span>
</span></span><span style="display:flex;"><span>    i_parse_df &lt;- <span style="color:#447fcf">merge</span>(public_float, filer_status)%&gt;% 
</span></span><span style="display:flex;"><span>      <span style="color:#447fcf">mutate</span>(cik=cik_list[i], filepath=file, filedate=file_date)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    parse_df &lt;- <span style="color:#447fcf">bind_rows</span>(parse_df,i_parse_df) 
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    else{<span style="color:#999;font-style:italic">#if public float is empty</span>
</span></span><span style="display:flex;"><span>      parse_df &lt;- <span style="color:#447fcf">bind_rows</span>(parse_df,filer_status%&gt;% <span style="color:#447fcf">mutate</span>(cik=cik_list[i], filepath=file, filedate=file_date)) 
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#999;font-style:italic">## print out the cik and its index in cik_list, to inform that you complete the data collection for this filer</span>
</span></span><span style="display:flex;"><span>    <span style="color:#447fcf">print</span>(<span style="color:#447fcf">paste</span>(<span style="color:#ed9d13">&#34;cik:&#34;</span>,cik_list[i],<span style="color:#ed9d13">&#34;; index: &#34;</span>,i))
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-style:italic">## save results</span>
</span></span><span style="display:flex;"><span><span style="color:#447fcf">write_csv</span>(parse_df,<span style="color:#ed9d13">&#34;filer_status_public_float.csv&#34;</span>)
</span></span></code></pre></div>
    </div>
    
<ul class="list-none pl-0 font-sm align-left">

<hr>
<li class="list-none">
    Categories:
    
    <a class="inline-block mt-2 mr-2 border-none text-neutral-800 dark:text-neutral-200"
       href="/categories/resource">
    <span class="tag-item dark:bg-zinc-900 dark:hover:bg-zinc-700
                 hover:bg-zinc-200 bg-zinc-100
                 dark:border-zinc-600 py-0.5
                 px-1 rounded-t border-b-2 border-zinc-300
                 hover:border-zinc-500">
    resource
    </span>
</a>
</li >


<li class="list-none">
    Tags:
    
    <a class="inline-block mt-2 mr-2 border-none text-neutral-800 dark:text-neutral-200"
       href="/tags/filer-status">
        <span class="flex flex-row justify-start items-center
                     dark:bg-zinc-900 dark:hover:bg-zinc-700
                     hover:bg-zinc-300 bg-zinc-200
                     dark:border-zinc-600 py-0.5
                     px-1 rounded-t border-b-2 border-zinc-300
                     hover:border-zinc-500">
            
            <img class="h-4 mr-2 inline" src="https://yegeorge.com/images/tag_logo.svg"
                 alt="Logo of a tag: indicates that a tag item follows.">
            filer status
        </span>
    </a>
    
    <a class="inline-block mt-2 mr-2 border-none text-neutral-800 dark:text-neutral-200"
       href="/tags/public-float">
        <span class="flex flex-row justify-start items-center
                     dark:bg-zinc-900 dark:hover:bg-zinc-700
                     hover:bg-zinc-300 bg-zinc-200
                     dark:border-zinc-600 py-0.5
                     px-1 rounded-t border-b-2 border-zinc-300
                     hover:border-zinc-500">
            
            <img class="h-4 mr-2 inline" src="https://yegeorge.com/images/tag_logo.svg"
                 alt="Logo of a tag: indicates that a tag item follows.">
            public float
        </span>
    </a>
    
    <a class="inline-block mt-2 mr-2 border-none text-neutral-800 dark:text-neutral-200"
       href="/tags/data-scraping">
        <span class="flex flex-row justify-start items-center
                     dark:bg-zinc-900 dark:hover:bg-zinc-700
                     hover:bg-zinc-300 bg-zinc-200
                     dark:border-zinc-600 py-0.5
                     px-1 rounded-t border-b-2 border-zinc-300
                     hover:border-zinc-500">
            
            <img class="h-4 mr-2 inline" src="https://yegeorge.com/images/tag_logo.svg"
                 alt="Logo of a tag: indicates that a tag item follows.">
            data scraping
        </span>
    </a>
    
</li>

</ul>


    

    
</article>

    </main>
  </body>
</html>
